---
import PricingTable from "../components/PricingTable.astro"
import Calculator from "../components/Calculator.astro"
import Hero from "../components/Hero.astro"
import Base from "../layouts/Base.astro"
import { withBase } from "../lib/paths"
---
<Base title="Process — Scrapyard Sites">
  <Hero
    title="How We Build Your Reputation"
    body="In just seven days, we transform an outdated or invisible scrapyard site into a trusted digital storefront—built for compliance, local visibility, and lasting credibility."
    primaryHref="/contact/"
    primaryLabel="Book a Discovery Call"
  />

  <section class="section" id="credibility">
    <div class="eyebrow">Process</div>
    <h2 class="mt-1 text-2xl font-bold tracking-tight">Our Process</h2>
    <div class="mt-6 grid gap-6 sm:grid-cols-2 lg:grid-cols-4">
      <div class="card"><h3 class="font-semibold">Assess & Plan</h3><p class="mt-1 text-sm text-zinc-600">Audit, compliance review, sitemap + local SEO.</p></div>
      <div class="card" id="qualification"><h3 class="font-semibold">Design & Build</h3><p class="mt-1 text-sm text-zinc-600">Modern responsive site; copy answers seller questions.</p></div>
      <div class="card" id="visibility"><h3 class="font-semibold">Optimize & Launch</h3><p class="mt-1 text-sm text-zinc-600">Local SEO, schema, QA, DNS switch.</p></div>
      <div class="card" id="reliability"><h3 class="font-semibold">Maintain & Grow</h3><p class="mt-1 text-sm text-zinc-600">Unlimited updates, patches, backups, reports.</p></div>
    </div>
  </section>

  <PricingTable />

  <section class="section">
    <div class="eyebrow">Tools</div>
    <h2 class="mt-1 text-2xl font-bold tracking-tight">Reputation Risk Calculator</h2>
    <div class="mt-6">
        <div class="container-narrow">
        <iframe id="calculator-embed" src={withBase('/embed/calculator/')} title="Reputation Risk Calculator" class="w-full rounded-lg border border-zinc-200" style="height: 420px;"></iframe>
      </div>
      <script is:inline>
        const iframe = document.getElementById('calculator-embed');
        const onMsg = (e) => {
          try {
            const same = e.origin === window.location.origin;
            if (!same || !e.data || e.data.type !== 'embedHeight' || e.data.id !== 'calculator') return;
            if (iframe && e.data.height && Number.isFinite(e.data.height)) {
              const min = 320, max = 900;
              const h = Math.max(min, Math.min(max, e.data.height));
              iframe.style.height = h + 'px';
            }
          } catch {}
        };
        window.addEventListener('message', onMsg);
      </script>
    </div>
  </section>

</Base>

