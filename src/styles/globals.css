@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
	/* Improve zoom accessibility */
	html {
		scroll-behavior: smooth;
	}

	/* Prevent scroll when menu is open */
	body.menu-open {
		overflow: hidden !important;
		position: fixed !important;
		width: 100% !important;
	}

	/* Ensure text remains readable at high zoom levels */
	*:not(.marquee-content):not(.marquee-wrapper):not(.marquee-container *) {
		max-width: 100%;
		word-wrap: break-word;
		overflow-wrap: break-word;
	}

	.eyebrow {
		@apply text-xs font-semibold uppercase tracking-wider text-zinc-700;
	}
	/* Container classes with responsive viewport padding */
	.container {
		@apply mx-auto max-w-7xl px-viewport-mobile sm:px-viewport-mobile md:px-viewport-tablet lg:px-viewport-desktop;
	}
	.container-narrow {
		@apply mx-auto max-w-3xl px-viewport-mobile sm:px-viewport-mobile md:px-viewport-tablet lg:px-viewport-desktop;
	}
	.section {
		@apply mx-auto max-w-7xl px-viewport-mobile sm:px-viewport-mobile md:px-viewport-tablet lg:px-viewport-desktop py-12 md:py-16;
	}
	.section-narrow {
		@apply mx-auto max-w-3xl px-viewport-mobile sm:px-viewport-mobile md:px-viewport-tablet lg:px-viewport-desktop py-8 md:py-12;
	}
	/* Container for centering content within a section that already has padding */
	.content-narrow {
		@apply mx-auto max-w-3xl;
	}
	/* Section padding - responsive horizontal padding from viewport edges */
	/* Note: Do not use with .container class as it already includes padding */
	.viewport-padding {
		@apply px-viewport-mobile sm:px-viewport-mobile md:px-viewport-tablet lg:px-viewport-desktop;
	}
	.anchor-target {
		scroll-margin-top: 6rem;
	}
	.card {
		@apply rounded-lg border border-zinc-200 bg-white p-5 transition-all duration-300;
	}
	.card-tinted {
		@apply rounded-lg border border-brand-orange/20 bg-brand-orange/5 p-5 transition-all duration-300;
	}

	/* Card hover effects - only on devices with hover capability */
	@media (hover: hover) {
		.card:hover {
			@apply shadow-lg border-zinc-300 -translate-y-1;
		}
		.card-tinted:hover {
			@apply shadow-lg border-brand-orange/30 -translate-y-1;
		}
	}

	/* Banded section separator */
	.band {
		@apply border-y border-zinc-100;
	}

	/* Chips */
	.chip {
		@apply inline-flex items-center rounded-full border border-zinc-300 px-3 py-1 text-sm;
	}

	/* Component-specific padding overrides */
	/* All components now use responsive viewport padding */

	/* Buttons */
	.btn {
		@apply inline-flex items-center justify-center rounded-md font-medium transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-orange focus-visible:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed;
	}
	.btn-primary {
		@apply bg-brand-orange text-white shadow px-5 py-3;
	}
	.btn-secondary {
		@apply bg-white text-zinc-900 ring-1 ring-inset ring-zinc-300 px-5 py-3;
	}
	/* For buttons on dark/imagery backgrounds */
	.btn-ghost-white {
		@apply bg-white/10 text-white ring-1 ring-inset ring-white/40 px-5 py-3;
	}
	/* High-contrast button on brand background */
	.btn-contrast {
		@apply bg-white text-brand-orange px-5 py-3;
	}

	/* Button hover effects - only on devices with hover capability */
	@media (hover: hover) {
		.btn:hover {
			@apply scale-105;
		}
		.btn-primary:hover {
			@apply opacity-95 shadow-lg;
		}
		.btn-secondary:hover {
			@apply bg-zinc-50 shadow-md;
		}
		.btn-ghost-white:hover {
			@apply bg-white/20 shadow-lg;
		}
		.btn-contrast:hover {
			@apply shadow-md;
		}
	}

	/* Mobile-friendly button click/active effects - works on all devices */
	.btn:active {
		@apply scale-98 opacity-90 transition-all duration-150;
	}
	.btn-primary:active {
		@apply brightness-90;
	}
	.btn-secondary:active {
		@apply bg-zinc-100;
	}
	.btn-ghost-white:active {
		@apply bg-white/25;
	}
	.btn-contrast:active {
		@apply bg-zinc-100;
	}

	/* Inline links */
	.link {
		@apply text-brand-orange focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-orange focus-visible:ring-offset-2 rounded-sm transition-all duration-200;
	}

	/* Link hover effects - only on devices with hover capability */
	@media (hover: hover) {
		.link:hover {
			@apply text-brand-orange/80 scale-105;
		}

		/* Link click/active effects - only on desktop */
		.link:active {
			@apply scale-95 text-brand-orange/90 transition-all duration-100;
		}
	}

	/* Form animations */
	.form-input {
		@apply rounded-md border border-zinc-300 px-3 py-2 transition-all duration-200;
	}
	.form-input:focus {
		@apply border-brand-orange ring-2 ring-brand-orange/20 scale-105;
	}

	/* Navigation links */
	.nav-link {
		@apply transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-orange rounded-sm;
	}

	/* Navigation link hover effects - only on devices with hover capability */
	@media (hover: hover) {
		.nav-link:hover {
			@apply text-brand-orange scale-110;
		}

		/* Navigation link click/active effects - only on desktop */
		.nav-link:active {
			@apply scale-100 transition-transform duration-100;
		}
	}

	/* Footer links */
	.footer-link {
		@apply transition-colors duration-200;
	}
	.footer-contact-link {
		@apply transition-colors duration-200;
	}

	/* Footer link hover effects - only on devices with hover capability */
	@media (hover: hover) {
		.footer-link:hover {
			@apply text-brand-orange;
		}
		.footer-contact-link:hover {
			@apply text-brand-orange/80;
		}

		/* Footer link click/active effects - only on desktop */
		.footer-link:active,
		.footer-contact-link:active {
			@apply scale-95 transition-transform duration-100;
		}
	}

	/* FAQ items */
	.faq-default,
	.faq-tinted {
		@apply transition-all duration-300;
	}

	/* FAQ click/active effects - works on all devices including mobile */
	.faq-default:active,
	.faq-tinted:active {
		@apply scale-98 transition-transform duration-150;
	}

	/* Blog post cards */
	.blog-card {
		@apply rounded-lg border border-zinc-200 p-5 transition-colors duration-200;
	}

	/* FAQ hover effects - only on devices with hover capability */
	@media (hover: hover) {
		.faq-default:hover {
			@apply border-zinc-300;
		}
		.faq-tinted:hover {
			@apply border-brand-orange/30;
		}

		/* Blog card hover effects */
		.blog-card:hover .blog-title {
			@apply text-brand-orange;
		}
	}

	/* FAQ Accordion animations */
	.faq-details {
		transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
	}
	.faq-details summary {
		list-style: none;
	}
	.faq-details summary::-webkit-details-marker {
		display: none;
	}

	/* Custom FAQ button for smooth animations */
	.faq-button {
		pointer-events: auto;
		cursor: pointer;
		user-select: none;
	}

	/* Smooth drawer animation using max-height */
	.faq-content {
		max-height: 0;
		opacity: 0;
		overflow: hidden;
		transition: max-height 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), 
		            opacity 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.1s;
	}
	.faq-details[open] .faq-content {
		max-height: 500px;
		opacity: 1;
		transition: max-height 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94), 
		            opacity 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.1s;
	}
	.faq-content > div {
		transform: translateY(-8px);
		transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.15s;
	}
	.faq-details[open] .faq-content > div {
		transform: translateY(0);
		transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.2s;
	}

	/* Mobile Menu Animations */
	.mobile-menu-overlay {
		display: none;
		/* Transparent overlay container */
		background-color: transparent;
		/* Ensure it covers everything including Safari bars */
		min-height: -webkit-fill-available;
		min-height: 100vh;
		/* Hide any overflow during animation */
		overflow: hidden;
		/* Prevent touch events from passing through */
		touch-action: none;
		/* Smooth transitions */
		will-change: opacity;
	}

	.mobile-menu-overlay.menu-showing {
		display: block !important;
	}

	.mobile-menu-overlay .menu-content {
		transform: translateY(-100%);
		transition: transform 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
		height: 100%;
		display: flex;
		flex-direction: column;
		/* Background is here, not on overlay */
		background-color: white;
		/* Account for iOS Safari bottom bar */
		padding-bottom: env(safe-area-inset-bottom, 0);
		will-change: transform;
	}

	.mobile-menu-overlay.menu-open .menu-content {
		transform: translateY(0);
	}

	/* Hamburger Menu Icon Animation */
	.hamburger-icon {
		transition: all 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
	}

	.hamburger-line {
		transition: all 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
		transform-origin: center center;
		will-change: transform, opacity;
	}

	/* Position hamburger lines with absolute positioning */
	.hamburger-line:nth-child(1) {
		transform: translateY(-6px);
	}
	.hamburger-line:nth-child(2) {
		transform: translateY(0);
	}
	.hamburger-line:nth-child(3) {
		transform: translateY(6px);
	}

	/* Hamburger to X transformation - improved positioning and timing */
	body.menu-open .hamburger-line:nth-child(1) {
		transform: translateY(0) rotate(45deg);
	}
	body.menu-open .hamburger-line:nth-child(2) {
		opacity: 0;
		transform: scaleX(0);
	}
	body.menu-open .hamburger-line:nth-child(3) {
		transform: translateY(0) rotate(-45deg);
	}

	/* Mobile menu content stagger animation */
	.mobile-nav-item {
		opacity: 0;
		transform: translateX(-16px);
		transition: opacity 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94), transform
			0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);
		will-change: opacity, transform;
	}
	.mobile-menu-overlay.menu-open .mobile-nav-item {
		opacity: 1;
		transform: translateX(0);
	}
	.mobile-menu-overlay.menu-open .mobile-nav-item:nth-child(1) {
		transition-delay: 0.05s;
	}
	.mobile-menu-overlay.menu-open .mobile-nav-item:nth-child(2) {
		transition-delay: 0.1s;
	}
	.mobile-menu-overlay.menu-open .mobile-nav-item:nth-child(3) {
		transition-delay: 0.15s;
	}
	.mobile-menu-overlay.menu-open .mobile-nav-item:nth-child(4) {
		transition-delay: 0.2s;
	}

	/* Remove focus outline when menu opens but keep for keyboard nav */
	.mobile-menu-overlay a:focus-visible {
		outline: 0.125rem solid #d75e02;
		outline-offset: 0.125rem;
	}
	.mobile-menu-overlay a:focus:not(:focus-visible) {
		outline: none;
	}
}

@layer utilities {
	.reveal {
		@apply opacity-0 translate-y-4;
	}
	.reveal.in {
		@apply opacity-100 translate-y-0 transition-all duration-500;
	}
	.reveal-immediate {
		@apply opacity-100 translate-y-0;
	}

	/* Mobile marquee animation for homepage banner */
	@keyframes marquee {
		0% {
			transform: translateX(0);
		}
		100% {
			transform: translateX(-100%);
		}
	}

	.marquee-wrapper {
		display: flex;
		will-change: transform;
		width: max-content;
	}

	.marquee-content {
		display: flex;
		white-space: nowrap;
		animation: marquee 20s linear infinite;
		flex-shrink: 0;
		min-width: 100vw;
		width: max-content;
	}

	.marquee-container {
		overflow: hidden;
		position: relative;
		width: 100%;
		max-width: 100%;
	}

	/* Blur effect on edges */
	.marquee-container::before,
	.marquee-container::after {
		content: "";
		position: absolute;
		top: 0;
		bottom: 0;
		width: 2.5rem;
		z-index: 10;
		pointer-events: none;
	}

	.marquee-container::before {
		left: 0;
		background: linear-gradient(to right, white, transparent);
	}

	.marquee-container::after {
		right: 0;
		background: linear-gradient(to left, white, transparent);
	}

	/* Dynamic marquee - when desktop layout switches to marquee due to wrapping */
	#features-marquee {
		transition: opacity 0.3s ease-in-out;
	}

	#features-list {
		transition: opacity 0.3s ease-in-out;
	}
}
