---
const {
	title = "Scrapyard Sites",
	description = "Scrapyard websites built for credibility, qualification, visibility and reliability.",
	ogImage,
	footerTinted = false,
} = Astro.props
import Footer from "../components/Footer.astro"
import Header from "../components/Header.astro"
import "../styles/globals.css"
import faviconUrl from "../assets/favicon.svg?url"
import { withBase } from "../lib/paths"
const canonical = new URL(withBase(Astro.url.pathname), Astro.site).toString()
const ogImageUrl =
	typeof ogImage === "string" ? ogImage : (ogImage?.src ?? "/og-image.png")
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonical} />
    
    <!-- Favicons -->
    <link rel="icon" href="/favicon.ico" sizes="16x16 32x32" type="image/x-icon" />
    <link rel="icon" href={faviconUrl} type="image/svg+xml" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180" />
    <meta name="theme-color" content="#2B2B2B" />
    <meta name="msapplication-TileColor" content="#2B2B2B" />
    
    <!-- Open Graph -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonical} />
    <meta property="og:site_name" content="Scrapyard Sites" />
    <meta property="og:image" content={ogImageUrl} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImageUrl} />
    <script defer src="https://cloud.umami.is/script.js" data-website-id="05311cc2-11da-4d7c-b0bb-7de8ec3277a1"></script>
    <script type="application/ld+json" is:inline>{JSON.stringify({
      '@context': 'https://schema.org',
      '@type': 'Organization',
      name: 'Scrapyard Sites',
      description: 'Professional website development for scrap yards and metal recycling businesses',
      url: Astro.site,
      logo: '/icon-512.png',
      image: '/og-image.png',
      sameAs: [
        'https://www.linkedin.com/company/scrapyardsites',
        'https://x.com/scrapyardsites'
      ],
      contactPoint: [{
        '@type': 'ContactPoint',
        email: 'hello@scrapyardsites.com',
        telephone: '+1-949-356-8762',
        contactType: 'customer support'
      }],
      address: {
        '@type': 'PostalAddress',
        addressCountry: 'US'
      },
      founder: {
        '@type': 'Person',
        name: 'Elias Burlison'
      }
    })}</script>
  </head>
  <body class="min-h-screen antialiased bg-white text-zinc-900 font-sans">
    <a href="#main-content" class="absolute left-2 top-2 z-50 -translate-y-20 rounded bg-white px-3 py-2 text-zinc-900 shadow transition focus:translate-y-0">Skip to content</a>
    <Header />
    <main id="main-content">
      <slot />
    </main>
    <Footer tinted={footerTinted} />
    <script is:inline>
      (function(){
        if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) return;
        var observer = new IntersectionObserver(function(entries){
          entries.forEach(function(e){ if (e.isIntersecting) { e.target.classList.add('in'); observer.unobserve(e.target); } });
        }, { rootMargin: '0px 0px -10% 0px', threshold: 0.1 });
        document.querySelectorAll('.reveal:not(.reveal-immediate)').forEach(function(el){ observer.observe(el); });
      })();
    </script>
    <script is:inline>
      // Umami goals for key CTAs
      (function(){
        var d = document;
        function send(goal){
          try {
            var u = (window && (window).umami);
            if (u && typeof u.track === 'function') u.track(goal);
          } catch {}
        }
        d.addEventListener('click', function(e){
          var target = e.target as HTMLElement | null;
          if (!target) return;
          var a = target.closest('[data-goal]') as HTMLElement | null;
          if (a && a.getAttribute('data-goal')) send(a.getAttribute('data-goal'));
          var link = target.closest('a') as HTMLAnchorElement | null;
          if (link && link.href && link.href.startsWith('tel:')) send('Click: Phone');
        }, true);
      })();
    </script>
  </body>
</html>


