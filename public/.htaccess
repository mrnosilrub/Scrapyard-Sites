# Security headers
<IfModule mod_headers.c>
    # Set security headers
    Header always set X-Content-Type-Options "nosniff"
    Header always set Content-Security-Policy "frame-ancestors 'self'"
    
    # Remove problematic headers
    Header unset X-XSS-Protection
    Header unset X-Frame-Options
    Header unset Expires
    
    # Set proper content-type for HTML files
    <FilesMatch "\.(html)$">
        Header set Content-Type "text/html; charset=utf-8"
    </FilesMatch>
    
    # Cache control for static assets
    <FilesMatch "\.(js|css|png|jpg|jpeg|webp|svg|ico|woff2|woff)$">
        Header set Cache-Control "public, max-age=31536000"
    </FilesMatch>
    
    # Cache control for HTML files
    <FilesMatch "\.(html)$">
        Header set Cache-Control "public, max-age=3600"
    </FilesMatch>
    
    # Manifest files
    <FilesMatch "\.(webmanifest)$">
        Header set Content-Type "application/manifest+json; charset=utf-8"
        Header set Cache-Control "public, max-age=86400"
    </FilesMatch>
</IfModule>

# Compression
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json application/xml
</IfModule>

# Enable rewrite engine for clean URLs
<IfModule mod_rewrite.c>
    RewriteEngine On
</IfModule>